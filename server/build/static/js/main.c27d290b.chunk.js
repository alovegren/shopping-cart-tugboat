(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{31:function(t,e,r){},58:function(t,e,r){"use strict";r.r(e);var n=r(1),c=r.n(n),a=r(10),u=r.n(a),i=(r(31),r(2)),s=r.n(i),o=r(3),d=r(4),p=r(7),l=r(8),j=r.n(l),f={getProducts:function(){var t=Object(o.a)(s.a.mark((function t(){var e,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.a.get("/api/products");case 2:return e=t.sent,r=e.data,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),createProduct:function(){var t=Object(o.a)(s.a.mark((function t(e){var r,n,c,a,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.title,n=e.price,c=e.quantity,t.next=3,j.a.post("/api/products",{title:r,price:n,quantity:c});case 3:return a=t.sent,u=a.data,t.abrupt("return",u);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),updateProduct:function(){var t=Object(o.a)(s.a.mark((function t(e){var r,n,c,a,u,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e._id,n=e.title,c=e.price,a=e.quantity,t.next=3,j.a.put("/api/products/".concat(r),{_id:r,title:n,price:c,quantity:a});case 3:return u=t.sent,i=u.data,t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),deleteProduct:function(){var t=Object(o.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.a.delete("/api/products/".concat(e));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),getCartItems:function(){var t=Object(o.a)(s.a.mark((function t(){var e,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.a.get("/api/cart");case 2:return e=t.sent,r=e.data,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),addItemToCart:function(){var t=Object(o.a)(s.a.mark((function t(e){var r,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.a.post("/api/add-to-cart",e);case 2:return r=t.sent,n=r.data,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),checkout:function(){var t=Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.a.post("api/checkout");case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},b=Object(p.b)("cartItems/fetchCartItems",Object(o.a)(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.getCartItems();case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))),h=Object(p.b)("cartItems/addItemToCart",function(){var t=Object(o.a)(s.a.mark((function t(e){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.addItemToCart(e);case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),O=Object(p.b)("cartItems/checkout",Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.checkout();case 2:case"end":return t.stop()}}),t)})))),x=Object(p.c)({name:"cartItems",initialState:[],reducers:{},extraReducers:function(t){t.addCase(b.fulfilled,(function(t,e){return e.payload})),t.addCase(h.fulfilled,(function(t,e){return t.filter((function(t){return t.productId!==e.payload.item.productId})).concat(e.payload.item)})),t.addCase(O.fulfilled,(function(){return[]}))}}).reducer,m=r(0),v=function(){var t=Object(d.b)(),e=Object(d.c)((function(t){return t.cartItems}));Object(n.useEffect)((function(){t(b())}),[t]);var r=function(){var e=Object(o.a)(s.a.mark((function e(r){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.preventDefault(),t(O());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"cart",children:[Object(m.jsx)("h2",{children:"Your Cart"}),Object(m.jsxs)("table",{className:"cart-items",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Item"}),Object(m.jsx)("th",{children:"Quantity"}),Object(m.jsx)("th",{children:"Price"})]})}),Object(m.jsx)("tbody",{children:e.map((function(t){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:t.title}),Object(m.jsx)("td",{children:t.quantity}),Object(m.jsx)("td",{children:t.price})]},t._id)}))}),Object(m.jsx)("tfoot",{children:Object(m.jsx)("tr",{children:Object(m.jsxs)("td",{colSpan:"3",className:"total",children:["Total: ",e.reduce((function(t,e){return t+e.price}),0)]})})})]}),Object(m.jsx)("a",{href:"/",onClick:r,className:"button checkout",children:"Checkout"})]})},y=function(){return Object(m.jsxs)("header",{children:[Object(m.jsx)("h1",{children:"The Shop!"}),Object(m.jsx)(v,{})]})},w=r(5),k=Object(p.b)("products/fetchProducts",Object(o.a)(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.getProducts();case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))),C=Object(p.b)("products/createProduct",function(){var t=Object(o.a)(s.a.mark((function t(e){var r,n,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.newProductInput,n=e.callback,t.next=3,f.createProduct(r);case 3:return c=t.sent,n&&n(),t.abrupt("return",c);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),g=Object(p.b)("products/updateProduct",function(){var t=Object(o.a)(s.a.mark((function t(e){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.updateProduct(e);case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),N=Object(p.b)("products/deleteProduct",function(){var t=Object(o.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.deleteProduct(e);case 2:return t.abrupt("return",e);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),P=Object(p.c)({name:"products",initialState:[],reducers:{},extraReducers:function(t){t.addCase(k.fulfilled,(function(t,e){return e.payload})),t.addCase(C.fulfilled,(function(t,e){t.push(e.payload)})),t.addCase(g.fulfilled,(function(t,e){return t.map((function(t){return t._id===e.payload._id?e.payload:t}))})),t.addCase(N.fulfilled,(function(t,e){return t.filter((function(t){return t._id!==e.payload}))})),t.addCase(h.fulfilled,(function(t,e){return t.map((function(t){return t._id===e.payload.product._id?e.payload.product:t}))}))}}).reducer,I=function(t){var e=t.onEditFormClick,r=t.product,c=Object(n.useState)(r.title),a=Object(w.a)(c,2),u=a[0],i=a[1],p=Object(n.useState)(r.price),l=Object(w.a)(p,2),j=l[0],f=l[1],b=Object(n.useState)(r.quantity),h=Object(w.a)(b,2),O=h[0],x=h[1],v=Object(d.b)(),y=function(){i(r.title),f(r.price),x(r.quantity)},k=function(){var t=Object(o.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.preventDefault(),v(g({_id:r._id,title:u,price:j,quantity:O}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"edit-form",children:[Object(m.jsx)("h3",{children:"Edit Product"}),Object(m.jsxs)("form",{children:[Object(m.jsxs)("div",{className:"input-group",children:[Object(m.jsx)("label",{for:"product-name",children:"Product Name"}),Object(m.jsx)("input",{onChange:function(t){return i(t.target.value)},type:"text",id:"product-name",value:u})]}),Object(m.jsxs)("div",{className:"input-group",children:[Object(m.jsx)("label",{for:"product-price",children:"Price"}),Object(m.jsx)("input",{onChange:function(t){return f(t.target.value)},type:"text",id:"product-price",value:j})]}),Object(m.jsxs)("div",{className:"input-group",children:[Object(m.jsx)("label",{for:"product-quantity",children:"Quantity"}),Object(m.jsx)("input",{onChange:function(t){return x(t.target.value)},type:"text",id:"product-quantity",value:O})]}),Object(m.jsxs)("div",{className:"actions form-actions",children:[Object(m.jsx)("a",{href:"/",onClick:k,className:"button",children:"Update"}),Object(m.jsx)("a",{href:"/",onClick:function(t){t.preventDefault(),e(y)},className:"button",children:"Cancel"})]})]})]})},q=r(26),S=function(t){var e=t.product,r=t.onEditFormClick,n=Object(d.b)(),c=function(){var t=Object(o.a)(s.a.mark((function t(r){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.preventDefault(),n(h(Object(q.a)({productId:e._id},e)));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),a=function(){var t=Object(o.a)(s.a.mark((function t(r){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.preventDefault(),n(N(e._id));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(m.jsx)("div",{className:"product",children:Object(m.jsxs)("div",{className:"product-details",children:[Object(m.jsx)("h3",{children:e.title}),Object(m.jsx)("p",{className:"price",children:e.price}),Object(m.jsxs)("p",{className:"quantity",children:[e.quantity," left in stock"]}),Object(m.jsxs)("div",{className:"actions product-actions",children:[Object(m.jsx)("a",{href:"/",onClick:c,className:"button add-to-cart",children:"Add to Cart"}),Object(m.jsx)("a",{href:"/",onClick:function(t){t.preventDefault(),r()},className:"button edit",children:"Edit"})]}),Object(m.jsx)("a",{href:"/",onClick:a,className:"delete-button",children:Object(m.jsx)("span",{children:"X"})})]})})},_=function(t){var e=t.product,r=Object(n.useState)(!1),c=Object(w.a)(r,2),a=c[0],u=c[1],i=function(t){u(!a),t&&t()};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(S,{product:e,onEditFormClick:i}),a&&Object(m.jsx)(I,{onEditFormClick:i,product:e})]})},E=function(){var t=Object(d.b)(),e=Object(d.c)((function(t){return t.products}));return Object(n.useEffect)((function(){t(k())}),[t]),Object(m.jsxs)("div",{className:"product-listing",children:[Object(m.jsx)("h2",{children:"Products"}),e.map((function(t){return Object(m.jsx)(_,{product:t},t._id)}))]})},D=function(){var t=Object(n.useState)(!1),e=Object(w.a)(t,2),r=e[0],c=e[1],a=r?"add-form visible":"add-form",u=Object(n.useState)(""),i=Object(w.a)(u,2),p=i[0],l=i[1],j=Object(n.useState)(0),f=Object(w.a)(j,2),b=f[0],h=f[1],O=Object(n.useState)(0),x=Object(w.a)(O,2),v=x[0],y=x[1],k=Object(d.b)(),g=function(t){t.preventDefault(),c(!r)},N=function(){l(""),h(0),y(0)},P=function(){var t=Object(o.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.preventDefault(),k(C({newProductInput:{title:p,price:b,quantity:v},callback:N}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:a,children:[Object(m.jsx)("p",{children:Object(m.jsx)("a",{href:"/",onClick:g,className:"button add-product-button",children:"Add A Product"})}),Object(m.jsx)("h3",{children:"Add Product"}),Object(m.jsxs)("form",{children:[Object(m.jsxs)("div",{className:"input-group",children:[Object(m.jsx)("label",{htmlFor:"product-name",children:"Product Name"}),Object(m.jsx)("input",{onChange:function(t){return l(t.target.value)},type:"text",id:"product-name",value:p})]}),Object(m.jsxs)("div",{className:"input-group",children:[Object(m.jsx)("label",{htmlFor:"product-price",children:"Price"}),Object(m.jsx)("input",{onChange:function(t){return h(t.target.value)},type:"text",id:"product-price",value:b})]}),Object(m.jsxs)("div",{className:"input-group",children:[Object(m.jsx)("label",{htmlFor:"product-quantity",children:"Quantity"}),Object(m.jsx)("input",{onChange:function(t){return y(t.target.value)},type:"text",id:"product-quantity",value:v})]}),Object(m.jsxs)("div",{className:"actions form-actions",children:[Object(m.jsx)("a",{href:"/api/products",onClick:P,className:"button",children:"Add"}),Object(m.jsx)("a",{href:"/",onClick:g,className:"button",children:"Cancel"})]})]})]})},F=function(){return Object(m.jsxs)("div",{id:"app",children:[Object(m.jsx)(y,{}),Object(m.jsxs)("main",{children:[Object(m.jsx)(E,{}),Object(m.jsx)(D,{})]})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var A=Object(p.a)({reducer:{products:P,cartItems:x}});u.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(d.a,{store:A,children:Object(m.jsx)(F,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[58,1,2]]]);
//# sourceMappingURL=main.c27d290b.chunk.js.map